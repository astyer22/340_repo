<!-- reviews.ejs -->

<% if (title) { %>
  <h1><%= title %></h1>
<% } else { %>
  <%- res.redirect('/') %>
<% } %>

<!-- <%- messages() %> -->

<!-- Error Handling -->
<% if (errors) { %>
<ul class="notice">
  <% errors.array().forEach(error => { %>
    <li><%= error.msg %></li>
  <% }) %>
</ul>
<% } %>

<div class="reviews">
  <h2>Valued Reviews</h2>
  <div class="carousel-container">
    <div class="carousel">
      <div class="carousel-track">
        <% reviews.forEach(review => { %>
          <div class="carousel-item">
            <div class="carousel-card">
              <h3><%= review.review_title %></h3>
              <p><%= review.review_text %></p>
              <p>Rating: <%= review.rating %> / 5</p>
              <p><em>- <%= review.customer_name %></em></p>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
    
    <!-- Navigation -->
    <div class="carousel-navigation">
      <button class="carousel-btn prev-btn">Previous</button>
      <div class="carousel-dots"></div>
      <button class="carousel-btn next-btn">Next</button>
    </div>
  </div>
</div>


<!-- Customer Review Submission Form -->
<form class="reviews_form" action="/customer/confirmation" method="post">
  <h2>Submit a Review</h2>

  <div>
    <label for="customer_name">Your Name</label>
    <input type="text" id="customer_name" name="customer_name" required>
  </div>

  <div>
    <label for="review_title">Review Title</label>
    <input type="text" id="review_title" name="review_title" required>
  </div>

  <div>
    <label for="rating">Rating</label>
    <input type="number" id="rating" name="rating" min="1" max="5" required>
  </div>


  <div>
    <label for="review_text">Review Text</label>
    <textarea id="review_text" name="review_text" required></textarea>
  </div>

  <button type="submit">Submit Review</button>
</form>

<script src="/js/c-reviews.js"></script>
